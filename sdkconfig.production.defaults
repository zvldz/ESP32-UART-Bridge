# BASE
CONFIG_AUTOSTART_ARDUINO=y
CONFIG_FREERTOS_HZ=1000

# USB Configuration
CONFIG_TINYUSB_ENABLED=y
CONFIG_TINYUSB_HOST_ENABLED=y
CONFIG_TINYUSB_HOST_MODE_FULL_SPEED=y

# USB Host Class drivers
CONFIG_TINYUSB_HOST_HUB=y
CONFIG_TINYUSB_HOST_HID=y
CONFIG_TINYUSB_HOST_MSC=y
CONFIG_TINYUSB_HOST_CDC=y

# USB Host Configuration
CONFIG_TINYUSB_HOST_DEVICE_MAX=4

# Debug level
CONFIG_TINYUSB_DEBUG_LEVEL=0

# USB Host settings
CONFIG_USB_HOST_CONTROL_TRANSFER_MAX_SIZE=256
CONFIG_USB_HOST_DEBOUNCE_DELAY_MS=150
CONFIG_USB_HOST_RESET_RECOVERY_MS=100
CONFIG_USB_HOST_SET_ADDR_RECOVERY_MS=100

# PSRAM
CONFIG_SPIRAM=y
CONFIG_SPIRAM_USE_MALLOC=y
CONFIG_SPIRAM_ALLOW_STACK_EXTERNAL_MEMORY=y

CONFIG_ESPTOOLPY_FLASHSIZE="4MB"
CONFIG_ESPTOOLPY_FLASHSIZE_4MB=y

# Bootloader
CONFIG_BOOTLOADER_LOG_LEVEL_NONE=y
CONFIG_BOOTLOADER_LOG_LEVEL=0
CONFIG_BOOT_ROM_LOG_ALWAYS_OFF=y

# Move WiFi task to Core 1 (away from UART on Core 0)
CONFIG_ESP_WIFI_TASK_PINNED_TO_CORE_0=n
CONFIG_ESP_WIFI_TASK_PINNED_TO_CORE_1=y

# UART DMA support
CONFIG_UART_ISR_IN_IRAM=y
#CONFIG_UART_RX_BUFFER_SIZE=8192

CONFIG_ETH_ENABLED=n

CONFIG_IDF_COMPONENT_MANAGER=n

##############
# Optimized sdkconfig for ESP32 UART Bridge - Maximum Speed Build
# Disables all unused components including WPA supplicant extras and Zigbee

# ============================================
# CORE CONFIGURATION
# ============================================
CONFIG_FREERTOS_UNICORE=n
CONFIG_FREERTOS_HZ=1000

# ============================================
# DISABLE UNUSED COMPONENTS
# ============================================

# Disable mbedTLS (not used in UART bridge)
CONFIG_MBEDTLS_ENABLED=n

# Disable OpenSSL
CONFIG_OPENSSL_ASSERT_DO_NOTHING=y

# Enable mDNS for Client mode device discovery
CONFIG_MDNS_ENABLED=y

# Disable ESP-TLS
CONFIG_ESP_TLS_USING_MBEDTLS=n

# Disable Zigbee and Thread
CONFIG_ZB_ENABLED=n
CONFIG_OPENTHREAD_ENABLED=n
CONFIG_IEEE802154_ENABLED=n

# Disable Bluetooth completely
CONFIG_BT_ENABLED=n
CONFIG_BLUEDROID_ENABLED=n
CONFIG_BT_NIMBLE_ENABLED=n

# Disable Ethernet
CONFIG_ETH_ENABLED=n

# Disable SPI Flash encryption/security
CONFIG_SECURE_FLASH_ENC_ENABLED=n
CONFIG_SECURE_BOOT=n
CONFIG_SECURE_BOOT_SIGNED_BINARIES=n
CONFIG_SECURE_BOOT_BUILD_SIGNED_BINARIES=n

# Disable file systems we don't use
CONFIG_SPIFFS_ENABLED=n
CONFIG_FATFS_ENABLED=n

# Disable unused app protocols
CONFIG_ESP_HTTP_CLIENT_ENABLE=n
CONFIG_ESP_HTTP_SERVER_ENABLE=n
CONFIG_ESP_WEBSOCKET_CLIENT_ENABLE=n
CONFIG_MQTT_ENABLED=n
CONFIG_COAP_ENABLED=n

# ============================================
# ENABLED COMPONENTS (Required)
# ============================================

# UART Driver
CONFIG_UART_ENABLED=y
CONFIG_UART_ISR_IN_IRAM=y

# GPIO Driver
CONFIG_GPIO_ENABLED=y

# Timer Driver  
CONFIG_TIMER_ENABLED=y

# SPI Master (for flash)
CONFIG_SPI_MASTER_ENABLED=y
CONFIG_SPI_MASTER_ISR_IN_IRAM=y

# USB Support !!!
#CONFIG_USB_OTG_SUPPORTED=y
#CONFIG_TINYUSB=y
#CONFIG_TINYUSB_CDC_ENABLED=y

# WiFi (minimal config)
CONFIG_ESP32_WIFI_ENABLED=y
CONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM=4
CONFIG_ESP32_WIFI_STATIC_TX_BUFFER_NUM=8
CONFIG_ESP32_WIFI_DYNAMIC_RX_BUFFER_NUM=8
CONFIG_ESP32_WIFI_TX_BUFFER_TYPE=0
CONFIG_ESP_WIFI_STA_SLEEP_ENABLE=n

# LittleFS
CONFIG_LITTLEFS_ENABLED=y

# Compiler
CONFIG_COMPILER_OPTIMIZATION_PERF=y
#CONFIG_COMPILER_OPTIMIZATION_SIZE=y
#CONFIG_COMPILER_OPTIMIZATION_ASSERTIONS_DISABLE=y
#CONFIG_COMPILER_WARN_WRITE_STRINGS=n
